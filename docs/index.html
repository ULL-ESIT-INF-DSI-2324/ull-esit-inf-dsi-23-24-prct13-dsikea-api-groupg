<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>p13-dsikea-api</title><meta name="description" content="Documentation for p13-dsikea-api"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">p13-dsikea-api</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>p13-dsikea-api</h2></div><div class="tsd-panel tsd-typography"><a id="md:práctica-13-api-rest-con-nodeexpress-para-gestionar-una-tienda-de-muebles" class="tsd-anchor"></a><h1><a href="#md:práctica-13-api-rest-con-nodeexpress-para-gestionar-una-tienda-de-muebles">Práctica 13: API REST con Node/Express para gestionar una tienda de muebles</a></h1><a id="md:desarrollo-de-sistemas-informáticos" class="tsd-anchor"></a><h2><a href="#md:desarrollo-de-sistemas-informáticos">DESARROLLO DE SISTEMAS INFORMÁTICOS</a></h2><a id="md:gabriel-ángel-canals-salleras---alu0101460468" class="tsd-anchor"></a><h3><a href="#md:gabriel-ángel-canals-salleras---alu0101460468">Gabriel Ángel Canals Salleras - alu0101460468</a></h3><a id="md:marco-napierski---alu0101469317" class="tsd-anchor"></a><h3><a href="#md:marco-napierski---alu0101469317">Marco Napierski - alu0101469317</a></h3><hr>
<a id="md:objetivo-de-la-práctica" class="tsd-anchor"></a><h2><a href="#md:objetivo-de-la-práctica">Objetivo de la práctica</a></h2><p>En el <strong>objetivo</strong> del proyecto consiste en la creación de un <strong>sistema de gestión</strong> de Stock y transacciones para una <strong>tienda de muebles</strong>. El sistema debe ser capaz de gestionar el stock, establecer las transacciones de compras a proveedores y ventas a customeres, y generar informes de ventas y stock. También podrán aplicarse las devoluciones de productos y la gestión de los customeres.</p>
<p>En este caso, el sistema consistirá en una API REST que permitirá la gestión de los distintos elementos del sistema. La API REST permitirá la creación, modificación y eliminación de los distintos elementos del sistema, así como la realización de las distintas transacciones.</p>
<a id="md:tareas-previas" class="tsd-anchor"></a><h2><a href="#md:tareas-previas">Tareas previas</a></h2><p>Tras aceptar debidamente la tarea en GitHub Classroom, habilitamos <strong>GitHub Pages</strong> para la elaboración de este informe. Posteriormente, clonamos el repositorio en nuestro equipo local y creamos una rama <code>code</code> para el desarrollo de la práctica.</p>
<p>En este proyecto trabajamos con <code>MongoDB</code>, <code>MongoDB Atlas</code>, <code>Node.js</code>, <code>Express.js</code>, <code>Mongoose</code> y <code>Render</code>. Este último es un motor de plantillas que nos permite desplegar la API REST en un servidor web.</p>
<a id="md:planteamiento-de-desarrollo" class="tsd-anchor"></a><h2><a href="#md:planteamiento-de-desarrollo">Planteamiento de desarrollo</a></h2><p>El sistema planteado en nuestro proyecto plantea el uso de <strong>cuatro bases de datos</strong> distintas: <code>furniture</code>, <code>customers</code>, <code>providers</code> y <code>transactions</code>. Cada una de estas bases de datos contendrá una serie de entradas que representarán los distintos elementos del sistema.</p>
<p>Operaciones que se pueden realizar en el sistema:</p>
<ul>
<li>CRUD de muebles.</li>
<li>CRUD de customeres.</li>
<li>CRUD de proveedores.</li>
<li>CRUD de transacciones.</li>
</ul>
<a id="md:creación-de-rutas" class="tsd-anchor"></a><h2><a href="#md:creación-de-rutas">Creación de Rutas</a></h2><p>Para la creación de las rutas de la API REST, hemos creado una serie de rutas que permiten la realización de las distintas operaciones del sistema. Las rutas creadas son las siguientes:</p>
<ul>
<li><code>/furniture</code>: Ruta que permite la realización de operaciones CRUD sobre los muebles.</li>
<li><code>/customers</code>: Ruta que permite la realización de operaciones CRUD sobre los customeres.</li>
<li><code>/providers</code>: Ruta que permite la realización de operaciones CRUD sobre los proveedores.</li>
<li><code>/transactions</code>: Ruta que permite la realización de operaciones CRUD sobre las transacciones.</li>
</ul>
<a id="md:creación-de-los-modelos" class="tsd-anchor"></a><h2><a href="#md:creación-de-los-modelos">Creación de los modelos</a></h2><p>Para la creación de los modelos de la base de datos, hemos creado una serie de modelos que representan los distintos elementos del sistema. Los modelos creados son los siguientes:</p>
<ul>
<li><code>Furniture</code>: Modelo que representa un mueble. Contiene los campos <code>name</code>, <code>type</code>, <code>description</code>, <code>price</code>, <code>material</code>, <code>color</code>, <code>dimensions</code> y <code>stock</code>.</li>
<li><code>Customer</code>: Modelo que representa un customere. Contiene los campos <code>name</code>, <code>nif</code>, <code>contact</code> y <code>address</code>.</li>
<li><code>Provider</code>: Modelo que representa un proveedor. Contiene los campos <code>name</code>, <code>cif</code>, <code>contact</code> y <code>address</code>.</li>
<li><code>Transaction</code>: Modelo que representa una transacción. Contiene los campos <code>type</code>, <code>date</code>, <code>furniture</code>, <code>amount</code>, <code>time</code> y <code>customer</code> o <code>provider</code>.</li>
</ul>
<a id="md:implementación-de-la-gestión-de-stock-operaciones-crud" class="tsd-anchor"></a><h2><a href="#md:implementación-de-la-gestión-de-stock-operaciones-crud">Implementación de la gestión de stock. Operaciones CRUD</a></h2><a id="md:añadir-un-mueble-al-stock" class="tsd-anchor"></a><h3><a href="#md:añadir-un-mueble-al-stock">Añadir un mueble al stock</a></h3><pre><code class="language-typescript"><span class="hl-0">furnitureRouter</span><span class="hl-1">.</span><span class="hl-2">post</span><span class="hl-1">(</span><span class="hl-3">&quot;/furniture&quot;</span><span class="hl-1">, (</span><span class="hl-0">req</span><span class="hl-1">, </span><span class="hl-0">res</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">furniture</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-2">Furniture</span><span class="hl-1">(</span><span class="hl-0">req</span><span class="hl-1">.</span><span class="hl-0">body</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">furniture</span><span class="hl-1">.</span><span class="hl-2">save</span><span class="hl-1">().</span><span class="hl-2">then</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-0">res</span><span class="hl-1">.</span><span class="hl-2">send</span><span class="hl-1">(</span><span class="hl-0">furniture</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
<p>Existen disparadores para comprobar si el mueble introducido es correcto. Si no lo es, se lanzará un error. Estos disparadores se encuentran en el modelo <code>Furniture</code>.</p>
<a id="md:eliminar-un-mueble-del-stock" class="tsd-anchor"></a><h3><a href="#md:eliminar-un-mueble-del-stock">Eliminar un mueble del stock</a></h3><p>Se elimina un mueble del stock mediante su <code>id</code>. La entrada se elimina de la base de datos y se devuelve un mensaje de confirmación.</p>
<a id="md:obteniendo-un-mueble-del-stock-por-su-id" class="tsd-anchor"></a><h3><a href="#md:obteniendo-un-mueble-del-stock-por-su-id">Obteniendo un mueble del stock por su <code>id</code></a></h3><p>Podremos obtener un mueble del stock mediante su <code>id</code>. Se devolverá el mueble correspondiente.</p>
<a id="md:obteniendo-todos-los-muebles-del-stock" class="tsd-anchor"></a><h3><a href="#md:obteniendo-todos-los-muebles-del-stock">Obteniendo todos los muebles del stock</a></h3><p>Podremos obtener todos los muebles del stock. Se devolverán todos los muebles de la base de datos.</p>
<a id="md:obteniendo-un-mueble-del-stock-por-consulta" class="tsd-anchor"></a><h3><a href="#md:obteniendo-un-mueble-del-stock-por-consulta">Obteniendo un mueble del stock por consulta</a></h3><p>Podremos obtener un mueble del stock mediante una consulta. Se devolverán los muebles que cumplan con la consulta.</p>
<a id="md:actualizando-un-mueble-del-stock" class="tsd-anchor"></a><h3><a href="#md:actualizando-un-mueble-del-stock">Actualizando un mueble del stock</a></h3><p>Podremos actualizar un mueble del stock mediante su <code>id</code> o por consulta. Se devolverá el mueble actualizado.</p>
<a id="md:proveedores-y-clientes" class="tsd-anchor"></a><h3><a href="#md:proveedores-y-clientes">Proveedores y clientes</a></h3><p>Estas entidades se gestionan de manera casi idéntica debido a su similitud. Se pueden añadir, eliminar por <code>id</code>, eliminar por <code>cif</code> o <code>nif</code>, obtener por <code>id</code>, obtener por <code>cif</code> o <code>nif</code>, obtener todos y actualizar por <code>id</code>, <code>cif</code> o <code>nif</code>.</p>
<a id="md:añadir-una-venta" class="tsd-anchor"></a><h3><a href="#md:añadir-una-venta">Añadir una venta</a></h3><p>Para añadir una venta se debe proporcionar el <code>nif</code> del cliente y un array con los nombres de los muebles vendidos y la cantidad de cada uno. Se comprobará si hay suficiente stock para realizar la venta y se actualizará el stock en consecuencia. Además, calculará el precio total de la venta y el momento en el que se ha realizado. Todo esto se almacenará en la base de datos en forma de transacción.</p>
<a id="md:añadir-una-compra" class="tsd-anchor"></a><h3><a href="#md:añadir-una-compra">Añadir una compra</a></h3><p>Para añadir una compra se debe proporcionar el <code>cif</code> del proveedor y un array con los nombres de los muebles comprados y la cantidad de cada uno. Se actualizará el stock en consecuencia y se almacenará en la base de datos en forma de transacción. En caso de comprar un mueble que no está en stock, se creará un nuevo mueble.</p>
<a id="md:realizar-una-devolución-de-una-serie-de-muebles" class="tsd-anchor"></a><h3><a href="#md:realizar-una-devolución-de-una-serie-de-muebles">Realizar una devolución de una serie de muebles</a></h3><p>La eliminación de una transacción implica la devolución de los muebles vendidos o comprados. Se actualizará el stock en consecuencia.</p>
<a id="md:actualización-de-transacciones" class="tsd-anchor"></a><h3><a href="#md:actualización-de-transacciones">Actualización de transacciones</a></h3><p>Se pueden actualizar las transacciones mediante su <code>id</code>. Se pueden actualizar los campos <code>type</code>, <code>date</code>, <code>furniture</code>, <code>amount</code>, <code>time</code>, <code>customer</code> o <code>provider</code>. En caso de que se actualice el campo <code>furniture</code>, se actualizará el stock en consecuencia.</p>
<a id="md:consulta-de-transacciones" class="tsd-anchor"></a><h3><a href="#md:consulta-de-transacciones">Consulta de transacciones</a></h3><p>Podrán obtenerse todas las transacciones, una transacción por <code>id</code>, por <code>nid</code> o por <code>cif</code>, u obtener todas las transacciones entre dos fechas.</p>
<a id="md:realización-de-tests" class="tsd-anchor"></a><h2><a href="#md:realización-de-tests">Realización de tests</a></h2><p>Hemos utilizado una metodología de desarrollo dirigida por pruebas (<strong>TDD</strong>) para la realización de esta práctica. Hemos creado una serie de tests para comprobar el correcto funcionamiento de las distintas clases y métodos del sistema. Hemos utilizado la biblioteca <code>mocha</code> para la realización de los tests y <code>supertest</code> para la realización de tests de integración.</p>
<a id="md:despliegue-en-render" class="tsd-anchor"></a><h2><a href="#md:despliegue-en-render">Despliegue en Render</a></h2><p>Hemos desplegado la API REST en Render para poder acceder a ella desde cualquier lugar.</p>
<a id="md:conclusión" class="tsd-anchor"></a><h2><a href="#md:conclusión">Conclusión</a></h2><p>La realización de esta práctica nos ha permitido aprender a crear una API REST con Node/Express y Mongoose. Hemos aprendido a crear rutas, modelos y controladores para la gestión de una base de datos. También hemos aprendido a realizar tests de integración para comprobar el correcto funcionamiento de la API REST.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:práctica-13-api-rest-con-nodeexpress-para-gestionar-una-tienda-de-muebles"><span>Práctica 13: API REST con <wbr/>Node/<wbr/>Express para gestionar una tienda de muebles</span></a><ul><li><a href="#md:desarrollo-de-sistemas-informáticos"><span>DESARROLLO DE SISTEMAS INFORMÁTICOS</span></a></li><li><ul><li><a href="#md:gabriel-ángel-canals-salleras---alu0101460468"><span>Gabriel Ángel <wbr/>Canals <wbr/>Salleras -<wbr/> alu0101460468</span></a></li><li><a href="#md:marco-napierski---alu0101469317"><span>Marco <wbr/>Napierski -<wbr/> alu0101469317</span></a></li></ul></li><li><a href="#md:objetivo-de-la-práctica"><span>Objetivo de la práctica</span></a></li><li><a href="#md:tareas-previas"><span>Tareas previas</span></a></li><li><a href="#md:planteamiento-de-desarrollo"><span>Planteamiento de desarrollo</span></a></li><li><a href="#md:creación-de-rutas"><span>Creación de <wbr/>Rutas</span></a></li><li><a href="#md:creación-de-los-modelos"><span>Creación de los modelos</span></a></li><li><a href="#md:implementación-de-la-gestión-de-stock-operaciones-crud"><span>Implementación de la gestión de stock. <wbr/>Operaciones CRUD</span></a></li><li><ul><li><a href="#md:añadir-un-mueble-al-stock"><span>Añadir un mueble al stock</span></a></li><li><a href="#md:eliminar-un-mueble-del-stock"><span>Eliminar un mueble del stock</span></a></li><li><a href="#md:obteniendo-un-mueble-del-stock-por-su-id"><span>Obteniendo un mueble del stock por su id</span></a></li><li><a href="#md:obteniendo-todos-los-muebles-del-stock"><span>Obteniendo todos los muebles del stock</span></a></li><li><a href="#md:obteniendo-un-mueble-del-stock-por-consulta"><span>Obteniendo un mueble del stock por consulta</span></a></li><li><a href="#md:actualizando-un-mueble-del-stock"><span>Actualizando un mueble del stock</span></a></li><li><a href="#md:proveedores-y-clientes"><span>Proveedores y clientes</span></a></li><li><a href="#md:añadir-una-venta"><span>Añadir una venta</span></a></li><li><a href="#md:añadir-una-compra"><span>Añadir una compra</span></a></li><li><a href="#md:realizar-una-devolución-de-una-serie-de-muebles"><span>Realizar una devolución de una serie de muebles</span></a></li><li><a href="#md:actualización-de-transacciones"><span>Actualización de transacciones</span></a></li><li><a href="#md:consulta-de-transacciones"><span>Consulta de transacciones</span></a></li></ul></li><li><a href="#md:realización-de-tests"><span>Realización de tests</span></a></li><li><a href="#md:despliegue-en-render"><span>Despliegue en <wbr/>Render</span></a></li><li><a href="#md:conclusión"><span>Conclusión</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="index.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>p13-dsikea-api</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>